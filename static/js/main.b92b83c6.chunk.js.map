{"version":3,"sources":["redux/dialogs-reducer.js","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Users/Users.module.css","components/common/Preloader/Preloader.module.css","assets/images/load.gif","components/common/LikeSign/LikeSign.module.css","assets/images/like.png","components/Profile/ProfileInfo/Status/Status.module.css","components/common/CommentarySign/CommentarySign.module.css","assets/images/commentary.png","components/common/ValidationForms/ValidationForms.jsx","components/News/News/News.module.css","components/Profile/Profile.module.css","api/api.js","redux/profile-reducer.js","redux/navigation-reducer.js","redux/users-reducer.js","redux/auth-reducer.js","redux/app-reducer.js","redux/news-reducer.js","redux/authentication-reducer.js","redux/redux-store.js","components/Header/Header.jsx","components/Header/HeaderContain.jsx","components/Navigation/Navigation.jsx","components/Navigation/NavigationContain.jsx","components/Users/Users.jsx","components/Users/User/User.jsx","components/common/Preloader/Preloader.jsx","components/common/Pagination/Pagination.jsx","redux/users-selectors.js","components/Users/UsersContain.jsx","components/common/LikeSign/LikeSign.jsx","components/Profile/Posts/Post/Post.jsx","components/Profile/Posts/Posts.jsx","components/Profile/Posts/PostsContain.jsx","components/Profile/ProfileInfo/Status/StatusWithHooks.jsx","components/common/ConfirmNavigationModal/ConfirmNavigationModal.jsx","components/Profile/ProfileInfo/ProfileInfoEditMode.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContain.jsx","components/Login/LoginContain.jsx","components/Sidebar/Commentary/Commentary.jsx","components/Sidebar/LatestComments.jsx","components/News/News/NewsCommentaries/NewsCommentaries.jsx","components/common/CommentarySign/CommentarySign.jsx","components/News/News/News.jsx","components/News/NewsListContain.jsx","App.js","serviceWorker.js","index.js","components/common/ValidationForms/ValidationForms.module.css","utils/validation/validation.js","components/Navigation/Navigation.module.css","components/Users/User/User.module.css","components/Profile/Posts/Post/Post.module.css","components/Header/Header.module.css","components/News/News/NewsCommentaries/NewsCommentaries.module.css","components/common/Pagination/Pagination.module.css","components/common/ConfirmNavigationModal/ConfirmNavigationModal.module.css","components/Login/Login.module.css","hoc/withAuthRedirect.js","components/Profile/Posts/Posts.module.css"],"names":["initialDialogsReducer","messagesData","id","text","time","dialogsList","name","newMessageText","sendMessageCreator","newMessage","type","dialogsReducer","state","action","newMessageValue","module","exports","Textarea","input","meta","props","child","touched","error","className","styles","input_zeroValueError","input_maxLengthError","Input","CreateField","validator","placeholder","component","validate","instance","axios","withCredentials","baseURL","headers","heroku","usersAPI","getUsers","currentPage","pageSize","get","then","res","data","getFirstThreeUsers","followUser","post","unFollowUser","delete","getUserProfile","console","warn","profileAPI","getProfile","getStatus","updateStatus","status","put","uploadPhoto","imageFile","formData","FormData","append","header","saveProfileChanges","profile","getPosts","userId","savePost","postText","uid","deletePost","postId","getOnePost","updatePost","newPostText","patch","addLike","deleteLike","authAPI","email","password","rememberMe","captcha","securityAPI","getCapchaUrl","newsAPI","newsCount","newsId","commentaryText","userName","_id","SET_USER_PROFILE","SET_USER_STATUS","initialProfilePage","postsData","dispatch","a","setUserProfile","setUserStatus","setUserProfileThunk","profileReducer","reverse","filter","photos","initialNavigation","navigationReducer","initialUsers","users","firstThreeUsers","totalUsersCount","isFetching","followingInProgress","displayingUsers","currentProfile","undefined","followUnfollowFlow","apiMethod","actionCreator","toggleFollowingInProgress","resultCode","follow","userID","unfollow","setUsers","setFirstThreeUsers","setCurrentPage","page","setTotalUsers","totalUsers","setIsFetching","usersReducer","map","u","followed","initialState","login","isAuth","captchaUrl","setAuthUserDataThunk","setAuthUserData","getCaptchaUrlSucess","getCaptchaUrl","authReducer","initialized","appReducer","initialNewsPage","newsData","getNewsDataSucess","newsReducer","commentedNewsId","commentedNews","news","authenticationReducer","reducers","combineReducers","profilePage","dialogsPage","navigation","usersPage","newsPage","auth","authentication","form","formReducer","app","store","createStore","applyMiddleware","thunkMiddleware","window","Header","header__name","userData","header__logined","header__welcome","onClick","logout","button_logout","to","HeaderAPIComponent","this","React","Component","HeaderContain","connect","Navigation","classes","nav","activeClassName","active","NavigationContain","bestFriends","items","Users","usersList","User","user","user__image","user__image__avatar","src","image","alt","disabled","some","button","button_unfollow","unFollowThunk","button_follow","followThunk","user__body","key","user__status","Preloader","preloader","load","Pagination","pagesCount","Math","ceil","totalCount","pages","i","push","pagesLength","length","numberOfParts","displayingElelements","useState","leftBorder","setLeftBorder","rightBorder","setRightBorder","pagesPart","setPagesPart","style","pagination","onPageChanged","slice","e","activePage","getAllUsers","createSelector","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersAPIComponent","UsersContain","bind","LikeSign","like","Post","post_wrapper","button_delete","date","post__message","post__like","usersLikes","post__likeSign","isLiked","post__likesCount","likes","maxLengthCreatorValidate","maxLengthCreator","AddNewPostReduxForm","reduxForm","Form","onSubmit","handleSubmit","newPostTextarea","Field","rows","required","send","onKeyPress","Posts","postsElements","Date","toLocaleString","values","addPost","sendNewPostTextAreaValue","PostsContain","newPostTextValue","Status","stateWithSetState","editMode","setEditMode","setStatus","useEffect","deactivateEditMode","updateStatusThunk","onBlur","onChange","currentTarget","value","autoFocus","onDoubleClick","ConfirmNavigationModal","onConfirm","onCancel","confirmNavigationModalWrap","confirmNavigationModal","confirmNavigationModal__inner","message","ProfileInfoEditModeReduxForm","isBlocking","when","small","profileInfo__avatar","autorizedUserProfile","profileInfo__uploadAvatar","onAvatarUploading","profileInfo__editMode","autorizedUserId","fullName","profileInfoEditMode__input","aboutMe","lookingForAJob","profileInfoEditMode__checkbox","Object","keys","contacts","index","contactTitle","contactValue","withRouter","Contact","ProfileInfoViewMode","profileInfo__avatarDiv","switchToEditMode","ProfileInfo","profileInfo","initialValues","switchToViewMode","log","defineProperty","writable","enumerable","configurable","target","files","Profile","ProfileContain","match","params","history","getUserStatusThunk","profileRender","prevProps","prevState","compose","file","getState","messages","stopSubmit","_error","withAuthRedirect","LoginReduxForm","loginForm","LoginContain","login__name","notLogined","Commentary","LatestComments","sidebar","NewsCommentary","newsCommentary","commentary","newsCommentary__date","newsCommentary__text","deleteCommentaryForNews","NewsCommentaries","commentaries","newsCommentariesList","commentariesName","CommentarySign","AddNewsCommentaryReduxForm","news__commentary","News","addCommentaryMode","switchToCommentaryMode","newsDataToNewsComponent","news__name","newsName","news__date","substring","news__hero","newsImage","newsText","news__likeAndCommentaryPanel","addCommentaryForNews","news__likeAndCommentaryPanel__commentarySign","news__likeAndCommentaryPanel__likeSign","likeAndCommentaryPanel__likeSign","NewsListContain","newsList","getNewsData","commentaryId","newsListToRender","DialogsContain","lazy","App","catchAllUnhandledErrors","reason","promise","initializedApp","addEventListener","removeEventListener","exact","path","render","Suspense","fallback","Promise","all","Boolean","location","hostname","ReactDOM","basename","process","document","getElementById","navigator","serviceWorker","ready","registration","unregister","maxLength","mapStateToPropsForRedirect","RedirectComponent"],"mappings":"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","file":"static/js/main.b92b83c6.chunk.js","sourcesContent":["const SEND_MESSAGE = 'SEND-MESSAGE'\r\nlet initialDialogsReducer = {\r\n        messagesData: \r\n        [\r\n        {id: 1, text: \"Привет, как дела\",time: '8:21'},\r\n        {id: 2, text: \"Норм, что делаешь\",time: '8:22'},\r\n        {id: 3, text: \"Ничего, а ты\",time: '8:23'},\r\n        {id: 4, text: \"Тоже ничего\",time: '8:24'},\r\n    ],\r\n        dialogsList:\r\n    [\r\n        {id: 1, name: \"Дядя\"},\r\n        {id: 2, name: \"Тетя\"},\r\n    ],\r\n    newMessageText: 'Введите текст сообщения'\r\n}\r\nexport const dialogsReducer = (state = initialDialogsReducer,action) => {\r\n    switch (action.type) {\r\n    case SEND_MESSAGE:\r\n          let newMessageValue = {\r\n              id: 12,\r\n              text: action.newMessage,\r\n              time: '4:20'\r\n          }\r\n          return({...state,\r\n          messagesData: [...state.messagesData,newMessageValue],\r\n          newMessageText: ''\r\n          })\r\n        default:\r\n            return state;\r\n      }\r\n}\r\nexport const sendMessageCreator = (newMessage) => ({type: SEND_MESSAGE,newMessage})\r\n\r\nexport default dialogsReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileInfo\":\"ProfileInfo_profileInfo__ZjDY7\",\"profileInfo__avatarDiv\":\"ProfileInfo_profileInfo__avatarDiv__eXTxx\",\"profileInfo__avatar\":\"ProfileInfo_profileInfo__avatar__2pkYw\",\"profileInfo__uploadAvatar\":\"ProfileInfo_profileInfo__uploadAvatar__31BtQ\",\"profileInfo__editMode\":\"ProfileInfo_profileInfo__editMode__Gecew\",\"profileInfoEditMode__input\":\"ProfileInfo_profileInfoEditMode__input__1sPPn\",\"profileInfoEditMode__checkbox\":\"ProfileInfo_profileInfoEditMode__checkbox__35y2Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"activePage\":\"Users_activePage__1hc4b\",\"button_showMore\":\"Users_button_showMore__3dBpn\",\"pagination\":\"Users_pagination__G_nbL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"Preloader_preloader__2gvum\"};","module.exports = __webpack_public_path__ + \"static/media/load.cffa9d9d.gif\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"like\":\"LikeSign_like__3-OOQ\"};","module.exports = __webpack_public_path__ + \"static/media/like.3308ee5f.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"Status_status__ZW5Q7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentary\":\"CommentarySign_commentary__1VBxU\"};","module.exports = __webpack_public_path__ + \"static/media/commentary.5a6a8108.png\";","import React from 'react'\r\nimport styles from './ValidationForms.module.css'\r\nimport {Field} from 'redux-form'\r\n\r\n    export const Textarea = ({input,meta,child,...props}) => {\r\n    {if (meta.touched && meta.error===\"Required\")\r\n    {return <div className={styles.input + ' ' + styles.input_zeroValueError}>\r\n    <textarea {...input}{...props} />\r\n    <span>Введите хотя бы 1 символ</span>\r\n     </div>}\r\n     else if (meta.touched && meta.error===\"Max length error\"){\r\n    return <div className={styles.input + ' ' + styles.input_maxLengthError}>\r\n    <textarea {...input}{...props} />\r\n    <span>Превышено максимальное число символов</span>\r\n     </div>\r\n     }\r\n    else {return <div className={styles.input}>\r\n    <textarea {...input}{...props} />\r\n    </div>}\r\n    }  \r\n}\r\n        export const Input = ({input,meta,...props}) => {\r\n        {if (meta.touched && meta.error===\"Required\")\r\n        {return <div className={styles.input + ' ' + styles.input_zeroValueError}>\r\n        <textarea  {...input} {...props}/>\r\n\r\n         </div>}\r\n         else if (meta.touched && meta.error===\"Max length error\"){\r\n        return <div className={styles.input + ' ' + styles.input_maxLengthError}>\r\n        <textarea  {...input} {...props}/>\r\n         </div>\r\n         }\r\n        else {return <div className={styles.input}>\r\n        <textarea  {...input} {...props}/>\r\n        </div>}}}\r\n\r\nexport const CreateField = (validator,placeholder,name,component,props={},className,text=\"\") => {\r\n    return <div className={className}>\r\n    <Field \r\n    validate={validator} \r\n    placeholder={placeholder} \r\n    name={name} \r\n    component={component}\r\n    {...props}\r\n    />{text}\r\n    </div>\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"news\":\"News_news__1437-\",\"news__hero\":\"News_news__hero__1vZQ0\",\"button\":\"News_button__1CPPk\",\"news__commentary\":\"News_news__commentary__1OAi_\",\"news__name\":\"News_news__name__Utyt9\",\"news__date\":\"News_news__date__wYwCM\",\"news__likeAndCommentaryPanel\":\"News_news__likeAndCommentaryPanel__p8Ljp\",\"news__likeAndCommentaryPanel__commentarySign\":\"News_news__likeAndCommentaryPanel__commentarySign__p29oY\",\"news__likeAndCommentaryPanel__likeSign\":\"News_news__likeAndCommentaryPanel__likeSign__3CPiG\",\"likeAndCommentaryPanel__likeSign\":\"News_likeAndCommentaryPanel__likeSign__1s9Gx\",\"isLiked\":\"News_isLiked__12e_O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile__hero\":\"Profile_profile__hero__1redV\"};","import * as axios from 'axios'\r\n\r\nconst instance = axios.create(\r\n    {\r\n        withCredentials: true,\r\n        baseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n        headers: {\r\n            \"API-KEY\":\"1afd68a5-f7c3-4ea6-991c-7d8bc0501e73\"\r\n        }\r\n    }\r\n)\r\nconst heroku = axios.create({\r\n    baseURL: \"https://expressrestapi.herokuapp.com/\",\r\n})\r\nexport const usersAPI = {\r\n    getUsers(currentPage=1,pageSize=1) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`).then(res=>\r\n            res.data)\r\n    \r\n    },\r\n    getFirstThreeUsers() {\r\n        return instance.get(`users?page=1&count=3`).then(res=>{\r\n            return res.data})\r\n    },\r\n    followUser(id) {\r\n        return instance.post(`follow/${id}`).then(res=>res.data)\r\n    },\r\n    unFollowUser(id) {\r\n        return instance.delete(`follow/${id}`).then(res=>res.data)\r\n    },\r\n    getUserProfile(id) {\r\n        console.warn('Use new method getProfile')\r\n        return profileAPI.getProfile(id)\r\n    }\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(id) {\r\n        return instance.get(`profile/${id}`)\r\n    },\r\n    getStatus(id) {\r\n        return instance.get(`profile/status/${id}`)\r\n    },\r\n    updateStatus(status) {\r\n        return instance.put(`profile/status`,{\r\n            status: status\r\n        })\r\n    },\r\n    uploadPhoto(imageFile){\r\n        const formData = new FormData()\r\n        formData.append(\"image\",imageFile)\r\n        return instance.put(`profile/photo`,formData,{\r\n            header: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n    },\r\n    saveProfileChanges(profile) {\r\n        return instance.put(`profile`,\r\n            profile\r\n        )\r\n    },\r\n    getPosts(userId) {\r\n        return heroku.get(`/posts/${userId}`,)\r\n    },\r\n    savePost(userId,postText) {\r\n        return heroku.post(`/posts`,{uid: userId,postText: postText})\r\n    },\r\n    deletePost(postId) {\r\n        return heroku.delete(`/posts`,{data: {\"postId\": postId}})\r\n    },\r\n    getOnePost(userId,postId){\r\n        return heroku.get(`/posts/${userId}/${postId}`)\r\n    },\r\n    updatePost(postId,newPostText) {\r\n        return heroku.patch(`/posts/${postId}`,{newPostText: newPostText})\r\n    },\r\n    addLike(postId,userId) {\r\n        return heroku.patch(`posts/${postId}/likes`,{uid: userId})},\r\n    deleteLike(postId,userId){\r\n        return heroku.delete(`posts/${postId}/likes`,{data: {\"uid\": userId}})}\r\n}\r\n\r\nexport const authAPI = {\r\n        authMe() {\r\n        return instance.get(`auth/me`).then(res=>res.data)\r\n        },\r\n        login(email,password,rememberMe = false,captcha=null) {\r\n        return instance.post(`auth/login`,{email,password,rememberMe,captcha}).then(res=>res.data) \r\n        },\r\n        logout() {\r\n        return instance.delete(`auth/login`).then(res=>res.data) \r\n        }\r\n}\r\nexport const authenticationAPI = {\r\n    authMe() {\r\n    return heroku.get(`auth/me`)\r\n    },\r\n    login(email,password) {\r\n    return heroku.post(`user/login`,{email,password})\r\n    }\r\n}\r\nexport const securityAPI = {\r\n    getCapchaUrl() {\r\n        return instance.get(`security/get-captcha-url`).then(res=>res.data)\r\n}}\r\n\r\nexport const newsAPI = {\r\n    getNewsData(newsCount=3) {\r\n        return heroku.get(`news?count=${newsCount}`).then(res=>res.data)\r\n    },\r\n    postCommentary(newsId,commentaryText,userName,userId) {\r\n        return heroku.patch(`news/${newsId}/commentaries`,{commentaryText,userName,userId})\r\n    },\r\n    deleteCommentary(newsId,_id) {\r\n        return heroku.delete(`news/${newsId}/commentaries`,{data: {\"_id\": _id}})\r\n    },\r\n    addLike(newsId,userId) {\r\n        return heroku.patch(`news/${newsId}/likes`,{userId})\r\n    },\r\n    deleteLike(newsId,userId) {\r\n        return heroku.delete(`news/${newsId}/likes`,{data: {\"userId\": userId}})\r\n    }\r\n}\r\nexport default usersAPI","import usersAPI, {profileAPI} from '../api/api'\r\nimport {stopSubmit} from 'redux-form'\r\n\r\nconst ADD_POST = 'profile-reducer/ADD-POST';\r\nconst DELETE_POST = 'profile-reducer/DELETE_POST'\r\nconst SET_USER_PROFILE = 'profile-reducer/SET_USER_PROFILE'\r\nconst SET_USER_STATUS = 'profile-reducer/SET_USER_STATUS'\r\nconst SAVE_PHOTO_SUCESS = \"profile-reducer/SAVE_PHOTO_SUCESS\"\r\nconst GET_POSTS_DATA_SUCESS = \"profile-reducer/GET_POSTS_DATA_SUCESS\"\r\n\r\nlet initialProfilePage = {\r\n    postsData: [],\r\n    newPostText: 'Whats up?',\r\n    profile: null,\r\n    status: ''\r\n}\r\nconst profileReducer = (state=initialProfilePage,action) => {\r\n    switch(action.type) { \r\n        // case ADD_POST: \r\n        //     return ({\r\n        //         ...state,\r\n        //         postsData: [...action.posts],\r\n        //         newPostText: ''\r\n        //     })\r\n        case GET_POSTS_DATA_SUCESS:\r\n            return ({\r\n                ...state,\r\n                postsData: [...action.postsData].reverse()\r\n            })\r\n        case SET_USER_PROFILE:{\r\n        return({\r\n            ...state,\r\n            profile: action.profile\r\n        })}\r\n        case SET_USER_STATUS:{\r\n            return({\r\n                ...state,\r\n                status: action.status\r\n            })\r\n        }\r\n        case DELETE_POST: {\r\n\r\n            return({\r\n                ...state,\r\n                postsData: state.postsData.filter(post=>post.id!=action.postId)\r\n            })\r\n        } \r\n        case SAVE_PHOTO_SUCESS: {\r\n            return(\r\n                {\r\n                    ...state,\r\n                    profile:{...state.profile,photos: action.photos} \r\n                }\r\n            )\r\n        }\r\n        default:\r\n            return state}}\r\n\r\n\r\n\r\nexport const getPostsDataSucess = (postsData) => ({type: GET_POSTS_DATA_SUCESS,postsData})\r\n\r\nexport const getPosts = (userId) => async (dispatch) => {\r\n    let res = await profileAPI.getPosts(userId)\r\n    if (res.status===200){\r\n    dispatch(getPostsDataSucess(res.data))  \r\n}}\r\nexport const addPost = (userId,newPostTextValue) => async (dispatch)=>{\r\n    let res = await profileAPI.savePost(userId,newPostTextValue)\r\n    if (res.status===200){\r\n    dispatch(getPosts(userId))}\r\n}\r\nexport const deletePost = (postId,userId) => async (dispatch)=>{\r\n    let res = await profileAPI.deletePost(postId)\r\n    if (res.status===200){\r\n    dispatch(getPosts(userId))}\r\n}\r\nexport const addLike = (postId,userId) => async (dispatch)=>{\r\n    let res = await profileAPI.addLike(postId,userId)\r\n    if (res.status===200){\r\n    dispatch(getPosts(userId))}\r\n}\r\nexport const deleteLike = (postId,userId) => async (dispatch)=>{\r\n    let res = await profileAPI.deleteLike(postId,userId)\r\n    if (res.status===200){\r\n    dispatch(getPosts(userId))}\r\n}\r\nexport const setUserProfile = (profile) => ({type: SET_USER_PROFILE,profile})\r\nexport const setUserStatus = (status) => ({type: SET_USER_STATUS, status})\r\nexport const savePhotoSucess = (photos) => ({type: SAVE_PHOTO_SUCESS, photos})\r\n\r\nexport const setUserProfileThunk = (userId) => async (dispatch) => {\r\n    let res = await usersAPI.getUserProfile(userId)    \r\n            dispatch(setUserProfile(res.data))}\r\n            \r\nexport const getUserStatusThunk = (userId) => {\r\n    return (dispatch) => {\r\n        profileAPI.getStatus(userId).then(res=>{\r\n            dispatch(setUserStatus(res.data))\r\n})}}\r\n\r\nexport const updateStatusThunk = (status) => async (dispatch) => {\r\n    try {\r\n        let res = await profileAPI.updateStatus(status)\r\n        if(res.data.resultCode===0){\r\n            dispatch(setUserStatus(status))}}\r\n    catch(err) {}}\r\n\r\nexport const uploadPhoto = (file) => async (dispatch) => {\r\n    let res = await profileAPI.uploadPhoto(file);\r\n    if (res.data.resultCode===0){\r\n        dispatch(savePhotoSucess(res.data.data.photos))\r\n    }\r\n}\r\nexport const saveProfileChanges = (formData) => async (dispatch,getState) => {\r\n    const userId = getState().auth.id\r\n    let res = await profileAPI.saveProfileChanges(formData);\r\n        if(res.data.resultCode===0) {\r\n            dispatch(setUserProfileThunk(userId))\r\n        }\r\n        else {\r\n            console.log(res.data.messages)\r\n            let message = res.data.messages[0]\r\n            dispatch(stopSubmit(\"ProfileInfoEditMode\",{_error: message}))\r\n        }\r\n}\r\nexport default profileReducer;\r\n// {id: 1, message: \"Я на Бали\"},\r\n// {id: 2, message: \"Я на Багамах\"},\r\n// {id: 3, message: \"Я на Гаваях\"},\r\n// {id: 4, message: \"Я в Майами\"},\r\n// {id: 5, message: \"Я в Амстердаме\"}","let initialNavigation = {\r\n    messagesData: \r\n    [\r\n    {id: 1, text: \"Love\",time: '4:20'},\r\n    {id: 2, text: \"Hate\",time: '4:20'},\r\n    {id: 3, text: \"Uptown\",time: '4:20'},\r\n    {id: 4, text: \"Shinin' like a diamond from an eagle to a pigeon\",time: '4:20'},\r\n    {id: 5, text: \"Bree\",time: '4:20'},\r\n    {id: 6, text: \"Love\",time: '4:20'},\r\n    {id: 7, text: \"Hate\",time: '4:20'},\r\n    {id: 8, text: \"Uptown\",time: '4:20'},\r\n    {id: 9, text: \"Shinin' like a diamond from an eagle to a pigeon\",time: '4:20'},\r\n    {id: 10, text: \"Bree\",time: '4:20'}\r\n],\r\n    dialogsList:\r\n[\r\n    {id: 1, name: \"Lil Wayne\"},\r\n    {id: 2, name: \"Rick Ross\"},\r\n    {id: 3, name: \"Birdman\"},\r\n    {id: 4, name: \"Drake\"},\r\n    {id: 5, name: \"Dj Khaled\"},\r\n    {id: 6, name: \"Snopp Dogg\"},\r\n    {id: 7, name: \"Wiz Khalifa\"},\r\n    {id: 8, name: \"Swae Lee\"},\r\n    {id: 9, name: \"Slim Jxmmi\"},\r\n    {id: 10, name: \"Rick Rubin\"},\r\n\r\n],\r\nnewMessageText: 'Введите текст сообщения'\r\n}\r\nconst navigationReducer = (state=initialNavigation, action) => {\r\n    return state\r\n}\r\nexport default navigationReducer;","import usersAPI from '../api/api'\r\nimport {updateObjectsInArray} from '../utils/object-helpers'\r\n\r\nconst FOLLOW = 'FOLLOW'\r\nconst UNFOLLOW = 'UNFOLLOW'\r\nconst SET_USERS = 'SET_USERS'\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE'\r\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT'\r\nconst SET_IS_FETCHING = 'SET_IS_FETCHING'\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS'\r\nconst SET_FIRST_THREE_USERS = \"users-reducer/SET_FIRST_THREE_USERS\"\r\nconst SET_CURRENT_PROFILE = \"user-reducer/SET_CURRENT_PROFILE\"\r\n\r\nlet initialUsers = {\r\n        users:[],\r\n        firstThreeUsers: [],\r\n        pageSize: 3,\r\n        totalUsersCount: 0,\r\n        currentPage: 1,\r\n        isFetching: false,\r\n        followingInProgress: [],\r\n        displayingUsers: 10,\r\n        currentProfile: undefined,\r\n}\r\n\r\nexport const usersReducer = (state = initialUsers,action) => {\r\n    switch (action.type) {\r\n        case FOLLOW:{\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u=>{\r\n                    if (u.id===action.userID){\r\n                        return ({...u, followed: true})\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n            //users: updateObjectsInArray(state.users,'id',action.userID,{followed:true})\r\n        }\r\n        case UNFOLLOW:\r\n                return {\r\n                    ...state,\r\n                    users: state.users.map(u=>{\r\n                        if (u.id===action.userID){\r\n                            return ({...u, followed: false})\r\n                        }\r\n                        return u\r\n                    })\r\n                }\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: action.users,\r\n            }\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.page\r\n            }\r\n        case SET_TOTAL_USERS_COUNT:\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.totalUsers\r\n            }\r\n        case SET_IS_FETCHING: \r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS: {\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching \r\n                ? [...state.followingInProgress, action.userID]\r\n                : state.followingInProgress.filter(id=>id!=action.userID)\r\n            }\r\n        }\r\n        case SET_FIRST_THREE_USERS: {\r\n            return {\r\n                ...state,\r\n                firstThreeUsers: action.firstThreeUsers\r\n            }\r\n        }\r\n        case SET_CURRENT_PROFILE: {\r\n            return {\r\n                ...state,\r\n                currentProfile: action.currentProfile\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n      }\r\n}\r\n\r\nexport const getUsers = (currentPage,pageSize) => {\r\n    return async (dispatch) => {\r\n            dispatch(setIsFetching(true)) \r\n            dispatch(setCurrentPage(currentPage))\r\n            let data = await usersAPI.getUsers(currentPage,pageSize)\r\n            dispatch(setIsFetching(false))\r\n            dispatch(setUsers(data.items))\r\n            data.totalCount>100?dispatch(setTotalUsers(100)):dispatch(setTotalUsers(data.totalCount))\r\n}}\r\nexport const getFirstThreeUsers = () => {\r\n    return async (dispatch) => {\r\n        dispatch(setIsFetching(true))\r\n        let firstThreeUsers = await usersAPI.getFirstThreeUsers()\r\n        dispatch(setFirstThreeUsers(firstThreeUsers.items))\r\n        dispatch(setIsFetching(false))\r\n        \r\n    }\r\n}\r\nconst followUnfollowFlow = async (id, dispatch, apiMethod,actionCreator) => {\r\n    dispatch(toggleFollowingInProgress(true,id))\r\n    let res = await apiMethod(id)\r\n    if (res.resultCode==0) {\r\n        dispatch(actionCreator(id))\r\n        }\r\n        dispatch(toggleFollowingInProgress(false,id))}\r\n\r\n\r\nexport const unFollowThunk = (id) => (dispatch) =>{\r\n        let apiMethod = usersAPI.unFollowUser.bind(usersAPI)\r\n        let actionCreator = unfollow\r\n        followUnfollowFlow(id,dispatch,apiMethod,actionCreator)\r\n}\r\n\r\nexport const followThunk = (id) => \r\n        async (dispatch) =>{\r\n        dispatch(toggleFollowingInProgress(true,id))\r\n        let apiMethod = usersAPI.followUser.bind(usersAPI)\r\n        let actionCreator = follow\r\n        let res = await usersAPI.followUser(id) \r\n    if (res.resultCode==0){\r\n        dispatch(follow(id))\r\n        }\r\n        dispatch(toggleFollowingInProgress(false,id))}\r\n\r\nexport const follow = (userID) => ({type: FOLLOW, userID})\r\nexport const unfollow = (userID) => ({type: UNFOLLOW, userID})\r\nexport const setUsers = (users) => ({type: SET_USERS, users})\r\nexport const setFirstThreeUsers = (firstThreeUsers) => ({type: SET_FIRST_THREE_USERS, firstThreeUsers})\r\nexport const setCurrentPage = (page) => ({type: SET_CURRENT_PAGE, page})\r\nexport const setTotalUsers = (totalUsers) => ({type: SET_TOTAL_USERS_COUNT,totalUsers})\r\nexport const setIsFetching = (isFetching) => ({type: SET_IS_FETCHING,isFetching})\r\nexport const toggleFollowingInProgress = (isFetching,userID) => ({type: TOGGLE_IS_FOLLOWING_PROGRESS,isFetching,userID})\r\nexport const setCurrentProfile = (currentProfile) => ({type: SET_CURRENT_PROFILE,currentProfile})\r\n\r\nexport default usersReducer;","import {authAPI,securityAPI} from '../api/api'\r\nimport {stopSubmit} from 'redux-form'\r\n\r\nconst SET_AUTH_USER_DATA = 'SET_AUTH_USER_DATA'\r\nconst GET_CAPTCHA_URL_SUCESS = 'auth-reducer/GET_CAPTCHA_URL_SUCESS'\r\n\r\nlet initialState = {\r\n    email: null,\r\n    id: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null\r\n}\r\n\r\nexport const authReducer = (state = initialState,action) => {\r\n    switch (action.type) {\r\n        case SET_AUTH_USER_DATA: {\r\n            return {\r\n                ...state,\r\n                ...action.data,\r\n                //isAuth: true\r\n            } \r\n        }\r\n        case GET_CAPTCHA_URL_SUCESS: {\r\n            return {\r\n                ...state,\r\n                captchaUrl: action.captchaUrl\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n      }\r\n}\r\n\r\nexport const setAuthUserDataThunk = () => async (dispatch) => {\r\n        let res = await authAPI.authMe()\r\n        if (res.resultCode===0) {\r\n                dispatch(setAuthUserData(res.data.email,res.data.id,res.data.login,true))}\r\n            }\r\nexport const setAuthUserData = (email,id,login,isAuth) => ({type: SET_AUTH_USER_DATA, data: {\r\n    email, id, login,isAuth}})\r\n\r\nexport const login = (email,password,rememberMe,captcha) => async (dispatch) => {\r\n    let res = await authAPI.login(email,password,rememberMe,captcha)\r\n    console.log(res)\r\n    if (res.resultCode===0) {\r\n        dispatch(setAuthUserDataThunk())\r\n    }\r\n    else if(res.resultCode===1) {\r\n        let message = res.messages.length>0?res.messages[0]:undefined\r\n        dispatch(stopSubmit('login',{_error: message}))\r\n    }\r\n    else if(res.resultCode===10) {\r\n        dispatch(getCaptchaUrl())\r\n    }\r\n}\r\nexport const logout = () => async (dispatch) => {\r\n    let res = await authAPI.logout()\r\n    if (res.resultCode===0) {\r\n        dispatch(setAuthUserData(null,null,null,false))\r\n}}\r\nexport const getCaptchaUrlSucess = (captchaUrl) => ({\r\n    type: GET_CAPTCHA_URL_SUCESS,captchaUrl\r\n})\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n    const captchaUrl = await securityAPI.getCaptchaUrl()\r\n        dispatch(getCaptchaUrlSucess(captchaUrl))\r\n}\r\nexport default authReducer;","import { setAuthUserDataThunk } from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS'\r\n\r\nlet initialState = {\r\n   initialized: false\r\n}\r\n\r\nexport const appReducer = (state = initialState,action) => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            } \r\n    }\r\n        default:\r\n            return state;\r\n      }\r\n}\r\n\r\nexport const initializedSuccess = () => ({type: INITIALIZED_SUCCESS})\r\nexport const initializedApp = () => (dispatch) => {\r\n    let promise = dispatch(setAuthUserDataThunk())\r\n    Promise.all([promise]).then(()=>dispatch(initializedSuccess()) )\r\n   \r\n}\r\nexport default appReducer","import {newsAPI} from '../api/api'\r\n\r\nconst ADD_COMMENTARY_FOR_NEWS = 'news-reducer/WRITE_COMMENTARY_FOR_NEWS'\r\nconst GET_NEWS_DATA_SUCESS = 'news-reducer/GET_NEWS_DATA_SUCESS'\r\nconst UPDATE_NEWS_COMMENTARIES = 'news-reducer/UPDATE_NEWS_COMMENTARIES'\r\n\r\nlet initialNewsPage = {\r\n    newsData: []\r\n}\r\n\r\nconst newsReducer = (state=initialNewsPage,action) => {\r\n    switch(action.type) { \r\n        case GET_NEWS_DATA_SUCESS: {\r\n            return ({\r\n                ...state,\r\n                newsData: action.newsData\r\n            })\r\n        }\r\n\r\n        case UPDATE_NEWS_COMMENTARIES: {\r\n            const commentedNewsId = action.newsData._id\r\n            const commentedNews = state.newsData.filter(news=>news._id==commentedNewsId)\r\n            return ({\r\n                ...state,\r\n                newsData: commentedNews\r\n            })\r\n        }\r\n        default: {\r\n            return state}}}\r\n\r\nexport const getNewsDataSucess = (newsData) => ({type: GET_NEWS_DATA_SUCESS,newsData})\r\nexport const updateNewsCommentaries = (newsData) => ({type: UPDATE_NEWS_COMMENTARIES,newsData})\r\n\r\nexport const getNewsData = (newsCount) => async (dispatch) => {\r\n            let data = await newsAPI.getNewsData(newsCount)\r\n            dispatch(getNewsDataSucess(data))\r\n}\r\nexport const addCommentaryForNews = (newsId,commentaryText,userName,userId) => async (dispatch) => {\r\n            let res = await newsAPI.postCommentary(newsId,commentaryText,userName,userId)\r\n            if(res.status===200) {\r\n            let data = await newsAPI.getNewsData()\r\n            dispatch(getNewsDataSucess(data))\r\n            }\r\n}\r\n\r\nexport const deleteCommentaryForNews = (newsId,commentaryId) => async (dispatch) => {\r\n    let res = await newsAPI.deleteCommentary(newsId,commentaryId)\r\n    if(res.status===200) {\r\n    let data = await newsAPI.getNewsData()\r\n    dispatch(getNewsDataSucess(data))\r\n    }\r\n}\r\n\r\nexport const addLike = (newsId,userId) => async (dispatch) => {\r\n    let res = await newsAPI.addLike(newsId,userId)\r\n    console.log(res)\r\n    if(res.status===200&&res.data!=null) {\r\n    let data = await newsAPI.getNewsData()\r\n    dispatch(getNewsDataSucess(data))\r\n    }\r\n}\r\n\r\nexport const deleteLike = (newsId,userId) => async (dispatch) => {\r\n    let res = await newsAPI.deleteLike(newsId,userId)\r\n    if(res.status===200&&res.data!=null) {\r\n    let data = await newsAPI.getNewsData()\r\n    dispatch(getNewsDataSucess(data))\r\n    }\r\n}\r\n\r\nexport default newsReducer\r\n\r\n/*{newsId: 1, \r\n    newsName: \"Новый особняк стоимостью 25 млн$ был построен на 25 линии СНТ Дружба\",\r\n    newsImage: \"https://www.grekomania.ru/images/places/19/cyclades/santorini/big/88316_Famous-Santorini-sunset-3.jpg\",\r\n    date: \"28 июля\",\r\n    newsText: \"Роскошный особняк смотрится просто изумительно! Рядом с домом стоит множество суперкаров! В доме 8 спален, 5 ванных комнат. Роскошный особняк класса люкс принадлежит русскому бизнессмену!\",\r\n    commentaries: []\r\n},\r\n    {newsId: 2, newsName: \"Прощальный костер состоится 25 августа\",\r\n    newsImage: \"https://www.grekomania.ru/images/places/19/cyclades/santorini/big/88316_Famous-Santorini-sunset-3.jpg\",\r\n    date: \"28 июля\",\r\n    newsText: \"Будет очень весело! Приедут лучшие диджеи мира. Дом переньон и Хенеси икс о за счёт садоводства\",\r\n    commentaries: []\r\n},\r\n    {newsId: 3, newsName: \"Дорогое шампанское будет литься рекой на прощальном костре!\",\r\n    newsImage: \"https://www.grekomania.ru/images/places/19/cyclades/santorini/big/88316_Famous-Santorini-sunset-3.jpg\",\r\n    date: \"28 июля\",\r\n    newsText: \"Будет очень весело! Приедут лучшие диджеи мира. Дом переньон и Хенеси икс о за счёт садоводства\",\r\n    commentaries: []  \r\n},*/","import {authenticationAPI} from '../api/api'\r\nimport {stopSubmit} from 'redux-form'\r\n\r\nconst SET_AUTHENTICATION_USER_DATA = 'authentication-reducer/SET_AUTHENTICATION_USER_DATA'\r\n\r\nlet initialState = {\r\n    email: null,\r\n    id: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null\r\n}\r\n\r\nexport const authenticationReducer = (state = initialState,action) => {\r\n    switch (action.type) {\r\n        case SET_AUTHENTICATION_USER_DATA: {\r\n            return {\r\n                ...state,\r\n                ...action.data}}\r\n        default:\r\n            return state;\r\n}}\r\n\r\nexport const setAuthUserData = (email,id,login,isAuth) => ({type: SET_AUTHENTICATION_USER_DATA, data: {\r\n    email,id,login,isAuth}})\r\n\r\nexport const loginH = (email,password) => async (dispatch) => {\r\n    let res = await authenticationAPI.login(email,password)\r\n    if (res.status===200) {\r\n        dispatch(setAuthUserData(\"microblogworkingmail@mail.ru\",1355,\"MagicMan\",true,null))\r\n    }\r\n    else if(res.resultCode===1) {\r\n        let message = res.messages.length>0?res.messages[0]:undefined\r\n        dispatch(stopSubmit('login',{_error: message}))\r\n}}\r\n\r\nexport const logout = () => async (dispatch) => {\r\n    let res = await authenticationAPI.logout()\r\n    if (res.resultCode===0) {\r\n        dispatch(setAuthUserData(null,null,null,false))\r\n}}\r\n\r\nexport default authenticationReducer;","import {createStore, combineReducers, applyMiddleware} from 'redux';\r\nimport profileReducer from './profile-reducer';\r\nimport dialogsReducer from './dialogs-reducer';\r\nimport navigationReducer from './navigation-reducer';\r\nimport usersReducer from './users-reducer';\r\nimport authReducer from './auth-reducer'\r\nimport appReducer from './app-reducer'\r\nimport newsReducer from './news-reducer'\r\nimport authenticationReducer from './authentication-reducer'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport {reducer as formReducer} from 'redux-form'\r\n\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    navigation: navigationReducer,\r\n    usersPage: usersReducer,\r\n    newsPage: newsReducer,\r\n    auth: authReducer,\r\n    authentication: authenticationReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n});\r\n\r\nlet store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\nwindow.store=store\r\nexport default store;","import React from 'react';\r\nimport styles from './Header.module.css'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\nconst Header = (props) => {\r\n\r\nreturn (<header className={styles.header}>\r\n        <p className={styles.header__name}>UNKNOWN UNTITLED SOCIAL NETWORK</p>\r\n        {props.userData.isAuth?\r\n        <div className={styles.header__logined}>\r\n        <span className={styles.header__welcome}>Welcome, {props.userData.login}</span><button onClick={props.logout} className={styles.button_logout}>Выйти</button>\r\n        </div>:\r\n        <NavLink to={'/login'}>Войти</NavLink>}\r\n        \r\n        </header>)}\r\nexport default Header;","import React from 'react';\r\nimport {connect} from 'react-redux'\r\nimport Header from './Header'\r\nimport {setAuthUserDataThunk} from '../../redux/auth-reducer'\r\nimport {logout} from '../../redux/auth-reducer'\r\nimport withAuthRedirect from '../../hoc/withAuthRedirect'\r\n\r\nclass HeaderAPIComponent extends React.Component {\r\n\r\nrender() {\r\n        return (<Header {...this.props}/>)\r\n}}\r\nlet mapStateToProps = (state) => {\r\n        return(\r\n        {userData: state.auth}\r\n        )\r\n}\r\nlet HeaderContain = connect(mapStateToProps, {setAuthUserDataThunk,logout})(HeaderAPIComponent)\r\nexport default HeaderContain;","import React from 'react';\r\nimport classes from './Navigation.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nclass Navigation extends React.Component {\r\n  componentWillMount() {\r\n  this.props.getFirstThreeUsers()\r\n}\r\nrender(){\r\n\r\nreturn (<nav className={classes.nav}>\r\n<ul>\r\n  <li><NavLink to=\"/profile\" className={classes.navigation} activeClassName={classes.active}>Профиль</NavLink></li>\r\n  <li><NavLink to=\"/news\" className={classes.navigation}>Новости</NavLink></li>\r\n  <li><NavLink to=\"/dialogs\" className={classes.navigation} activeClassName={classes.active}>Сообщения</NavLink></li>\r\n  <li><NavLink to=\"\" className={classes.navigation}>Документы</NavLink></li>\r\n  <li><NavLink to=\"\" className={classes.navigation}>Информация</NavLink></li>\r\n  <li><NavLink to=\"/users\" className={classes.navigation}>Пользователи</NavLink></li>\r\n</ul>\r\n</nav>)}}\r\nexport default Navigation;","import React from 'react';\r\nimport Navigation from './Navigation'\r\nimport {connect} from 'react-redux'\r\nimport {getFirstThreeUsers} from '../../redux/users-reducer'\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {bestFriends: state.usersPage.firstThreeUsers}}\r\n\r\nconst NavigationContain = connect(mapStateToProps,{getFirstThreeUsers})(Navigation)\r\n\r\nexport default NavigationContain;","import React from 'react';\r\nimport styles from './Users.module.css';\r\nconst Users = (props) => {\r\n        return (\r\n        <div className={styles.usersPage}>\r\n        <div>{props.usersList}</div>\r\n        </div>\r\n        )}\r\nexport default Users;","import React from 'react';\r\nimport styles from './User.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nconst User = (props) => {\r\n    return (\r\n    <section className={styles.user}>\r\n    <div className={styles.user__image}>\r\n        <figure>\r\n        <NavLink className={styles.user__image__avatar} to={`/profile/${props.userData.id}`}>\r\n        <img src={props.userData.image === undefined ? \"https://i.pinimg.com/236x/19/93/93/1993934932cca30fa70f3ffed2a62479--justin-bieber-quotes-swag.jpg\" : props.userData.image  } alt=\"love\"/>\r\n        </NavLink> \r\n        </figure>\r\n            {props.userData.followed?\r\n            <button disabled={props.followingInProgress.some(id => id===props.userData.id)} \r\n            className={styles.button + ' ' + styles.button_unfollow} \r\n            onClick={() => {props.unFollowThunk(props.userData.id)}}>Отписаться</button>\r\n            :\r\n            <button disabled={props.followingInProgress.some(id => id===props.userData.id)} \r\n            className={styles.button + ' ' + styles.button_follow} \r\n            onClick={()=>{props.followThunk(props.userData.id)\r\n            }}>Подписаться</button>}\r\n    </div>\r\n    <div className={styles.user__body} key={props.userData.id}>\r\n        <p>{props.userData.name}</p>\r\n        <span>LA, </span>\r\n        <span>USA</span>\r\n        <p>{props.userData.id}</p>\r\n        <p className={styles.user__status}>{props.userData.status}</p>\r\n    </div>\r\n    </section>\r\n    )\r\n}\r\n/*<section className={classes.user}>\r\n<div className={classes.user__image}>\r\n    <figure>\r\n        <img src={props.userData.image} alt=\"love\"/>\r\n    </figure>\r\n    {props.userData.followed ? \r\n    <button className={classes.button + ' ' + classes.button_unfollow} onClick={() => {props.unfollow(props.userData.id)}}>Отписаться</button> : \r\n    <button className={classes.button + ' ' + classes.button_follow} onClick={()=>{props.follow(props.userData.id)}}>Подписаться</button>}\r\n</div>\r\n<div className={classes.user__body} key={props.userData.id}>\r\n    <p>{props.userData.name}</p>\r\n    <span>{`${props.userData.location.city}, `}</span>\r\n    <span>{props.userData.location.country}</span>\r\n    <p>{props.userData.status}</p>\r\n</div>\r\n</section>*/\r\n      /*props.toggleFollowingInProgress(true,props.userData.id)\r\n            getUsersAPI.unFollowUser(props.userData.id).then(res=>{\r\n        if (res.resultCode==0){\r\n            props.unfollow(props.userData.id)\r\n            }\r\n            props.toggleFollowingInProgress(false,props.userData.id)\r\n        })*/\r\n/*props.toggleFollowingInProgress(true,props.userData.id)\r\n            getUsersAPI.followUser(props.userData.id).then(res=>{\r\n            if (res.resultCode==0){\r\n                props.follow(props.userData.id)\r\n            }\r\n            props.toggleFollowingInProgress(false,props.userData.id)         \r\n    })*/\r\nexport default User;","import React from 'react';\r\nimport styles from './Preloader.module.css';\r\nimport load from '../../../assets/images/load.gif'\r\n\r\nconst Preloader = (props) => {\r\n    return (<img className={styles.preloader} src={load} />)\r\n}\r\n\r\nexport default Preloader;\r\n","import React from 'react';\r\nimport style from './Pagination.module.css';\r\nimport {useState} from 'react'\r\n\r\nconst Pagination = (props) => {\r\n    let pagesCount = Math.ceil(props.totalCount/props.pageSize)\r\n    let pages = [];\r\n    for (let i=1; i <=pagesCount; i++){\r\n        pages.push(i)}\r\n    let pagesLength = pages.length\r\n    let numberOfParts = Math.ceil(pagesLength/props.displayingElelements)\r\n    const[leftBorder,setLeftBorder] = useState(1)\r\n    const[rightBorder,setRightBorder] = useState(props.displayingElelements)\r\n    const[pagesPart,setPagesPart] = useState(1) \r\n    return <div className={style.pagination}>\r\n    {pagesPart>1?<button onClick={()=>{setLeftBorder(leftBorder-props.displayingElelements) \r\n                          setRightBorder(rightBorder-props.displayingElelements)\r\n                          setPagesPart(pagesPart-1)\r\n                          props.onPageChanged(leftBorder+1)\r\n                          }} className={style.button}>Назад</button>:null}\r\n    {pages.slice(leftBorder-1,rightBorder).map(page=><span onClick={(e)=>{props.onPageChanged(page)}} className={props.currentPage===page&&style.activePage}>{`${page} `}</span>)}\r\n    {pagesPart<numberOfParts?<button onClick={()=>{\r\n                          setLeftBorder(rightBorder+1) \r\n                          setRightBorder(rightBorder+props.displayingElelements)\r\n                          setPagesPart(pagesPart+1)\r\n                          props.onPageChanged(rightBorder+1)\r\n                          }} className={style.button}>Далее</button>:null}\r\n    </div>\r\n    }\r\n    \r\nexport default Pagination;","import {createSelector} from 'reselect'\r\n\r\nexport const getAllUsersSelector = (state) => {\r\n    return state.usersPage.users\r\n}\r\nexport const getAllUsers = createSelector(getAllUsersSelector, (users) => {\r\n    return users.filter(u=>u.id>1436)\r\n})\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize\r\n}\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage\r\n}\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching\r\n}\r\nexport const getFollowingInProgress = (state) => {\r\n    return state.usersPage.followingInProgress\r\n}","import React from 'react';\r\nimport {follow, unfollow, setCurrentPage,toggleFollowingInProgress,getUsers,followThunk,unFollowThunk} from './../../redux/users-reducer'\r\nimport {connect} from 'react-redux'\r\nimport Users from './Users'\r\nimport User from './User/User';\r\nimport Preloader from '../common/Preloader/Preloader'\r\nimport Pagination from '../common/Pagination/Pagination'\r\nimport {getAllUsers,getPageSize,getTotalUsersCount,getCurrentPage,getIsFetching,getFollowingInProgress} from '../../redux/users-selectors'\r\n\r\n\r\nclass UsersAPIComponent extends React.Component {\r\n  \r\n        componentDidMount() {\r\n            this.props.getUsers(this.props.currentPage, this.props.pageSize)}\r\n        onPageChanged = (page) => {\r\n            this.props.setCurrentPage(page)\r\n            this.props.getUsers(page, this.props.pageSize)\r\n        }\r\n        render() {\r\n            let usersList = this.props.users.map(\r\n                user=>{\r\n                return (<User userData={user} toggleFollowingInProgress={this.props.toggleFollowingInProgress} followingInProgress={this.props.followingInProgress} followThunk={this.props.followThunk} unFollowThunk={this.props.unFollowThunk} follow={this.props.follow} unfollow={this.props.unfollow}/>)})\r\n                \r\n            return(<>\r\n            {this.props.isFetching?<Preloader />:null} \r\n            <Pagination totalCount={this.props.totalUsersCount} pageSize={this.props.pageSize} currentPage={this.props.currentPage} onPageChanged={this.onPageChanged} displayingElelements={this.props.displayingUsers}/>\r\n            <Users usersList={usersList}/>\r\n                </>\r\n            )\r\n        }}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return { \r\n        users: getAllUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n        displayingUsers: state.usersPage.displayingUsers\r\n}}\r\n\r\nconst UsersContain = connect(mapStateToProps, {\r\n    follow, unfollow, setCurrentPage, \r\n    toggleFollowingInProgress, getUsers,\r\n    followThunk, unFollowThunk})(UsersAPIComponent)\r\n\r\nexport default UsersContain;\r\n\r\n/*let mapDispatchToProps = (dispatch) => {\r\n        return {\r\n        follow: (userID) => {dispatch(followAC(userID))},\r\n        unfollow: (userID) => {dispatch(unfollowAC(userID))},\r\n        setUsers: (users) => {dispatch(setUsersAC(users))},\r\n        setCurrentPage: (page) => {dispatch(setCurrentPageAC(page))},\r\n        setTotalUsers: (totalUsers) => {dispatch(setTotalUsersAC(totalUsers))},\r\n        setIsFetching: (isFetching)=>{dispatch(setIsFetchingAC(isFetching))}\r\n}}*/\r\n  /*this.props.setIsFetching(true)    \r\n            getUsersAPI.getUsers(this.props.currentPage,this.props.pageSize).then(data=>{\r\n            this.props.setIsFetching(false)\r\n            this.props.setUsers(data.items)\r\n            data.totalCount>100?this.props.setTotalUsers(55):this.props.setTotalUsers(data.totalCount)})*/\r\n    /*\r\n            this.props.setIsFetching(true) \r\n                getUsersAPI.getUsers(page,this.props.pageSize).then(\r\n                    data=>{\r\n                        this.props.setIsFetching(false)\r\n                        this.props.setUsers(data.items)  \r\n                    }\r\n                )*/","import React from 'react';\r\nimport style from './LikeSign.module.css';\r\nimport like from '../../../assets/images/like.png'\r\n\r\nconst LikeSign = (props) => {\r\n    return <div className={props.className} onClick={(e)=>{props.onClick()}}>\r\n            <img className={style.like} src={like} alt=\"like\"/> \r\n            </div>}\r\n\r\nexport default LikeSign;\r\n//\r\n//return <div className={props.className} onClick={props.onClick}>\r\n//<img className={style.preloader} src={like} />\r\n//</div>","import React from 'react';\r\nimport style from './Post.module.css';\r\nimport LikeSign from '../../../common/LikeSign/LikeSign'\r\n\r\nconst Post = (props) => {\r\n        return (\r\n        <div className={style.post_wrapper}>\r\n                {props.userId===props.uid?<button type=\"submit\" className={style.button_delete} onClick={()=>props.deletePost(props.postId,props.userId)}>Удалить</button>:null}\r\n                <p>{props.name}</p>\r\n                <p>{props.date}</p>\r\n                <p className={style.post__message}>{props.postText}</p>\r\n        <section className={style.post__like}>\r\n        {props.usersLikes.some(user=>user==props.userId)?\r\n        <LikeSign onClick={()=>props.deleteLike(props.postId,props.userId)} className={style.post__likeSign + ' ' + style.isLiked}/>:\r\n        <LikeSign onClick={()=>props.addLike(props.postId,props.userId)} className={style.post__likeSign}/>}\r\n            <p className={style.post__likesCount}>{props.likes}</p>\r\n        </section>\r\n        </div>)} \r\n\r\nexport default Post;","import React from 'react';\r\nimport classes from './Posts.module.css';\r\nimport Post from './Post/Post';\r\nimport {reduxForm, Field, Form} from 'redux-form'\r\nimport {required,maxLengthCreator} from '../../../utils/validation/validation.js'\r\nimport {Textarea} from '../../../components/common/ValidationForms/ValidationForms'\r\n\r\nlet maxLengthCreatorValidate = maxLengthCreator(40)\r\n\r\nconst AddNewPostForm = (props) => {\r\n    return  <Form onSubmit={props.handleSubmit} className={classes.newPostTextarea}>\r\n                <Field rows='8' validate={[required,maxLengthCreatorValidate]} placeholder={props.newPostText} name={\"sendNewPostTextAreaValue\"} component={Textarea}/>\r\n                <button className={classes.send} onKeyPress={(e)=>{if(e.key === 'Enter'){props.handleSubmit()}}}>Новый пост</button>\r\n            </Form>\r\n}\r\n\r\nconst AddNewPostReduxForm = reduxForm({form: 'addNewPostForm'})(AddNewPostForm)\r\n\r\n\r\nconst Posts = (props) => {\r\n    let postsElements = props.postsData.map( post=> {\r\n        return(\r\n        <Post key={post.postId} \r\n        name={props.userName}\r\n        deletePost={props.deletePost} \r\n        addLike={props.addLike}\r\n        deleteLike={props.deleteLike} \r\n        usersLikes={post.usersLikes} \r\n        likes={post.likes} \r\n        userId={props.userId} \r\n        uid={post.uid} \r\n        postId={post.postId}\r\n        postText={post.postText} \r\n        date={new Date(post.date).toLocaleString()}/>)\r\n    })\r\n    let onAddPost = (values) => {\r\n        props.addPost(props.userId,values.sendNewPostTextAreaValue)\r\n    }\r\n    return (\r\n    <div>\r\n    <AddNewPostReduxForm onSubmit={onAddPost} newPostText={props.newPostText}/>\r\n    {postsElements}\r\n    </div>\r\n    )}\r\n    \r\n    export default Posts;","import React from 'react';\r\nimport {addPost,deletePost,addLike,deleteLike} from '../../../redux/profile-reducer'\r\nimport Posts from './Posts'\r\nimport {connect} from 'react-redux'\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        postsData: state.profilePage.postsData,\r\n        newPostText: state.profilePage.newPostText,\r\n        userName: state.auth.login,\r\n        userId: state.auth.id \r\n    }\r\n}\r\n\r\nconst PostsContain = connect(mapStateToProps, {addPost,deletePost,addLike,deleteLike})(Posts)\r\nexport default PostsContain;","import React, {useState,useEffect} from 'react'\r\nimport styles from './Status.module.css'\r\n\r\nconst Status = (props) => {\r\n       let stateWithSetState = useState(false); //default local state value\r\n       //let editMode = stateWithSetState[0]; //firts element of array created by useState\r\n       //let setEditMode = stateWithSetState[1]; //second element of array is function\r\n       let [editMode, setEditMode] = stateWithSetState\r\n       let [status, setStatus] = useState(props.status)\r\n       //useEffect works after page render\r\n       //hooks dont use in if else construction and cycles\r\n       useEffect(()=>{\r\n       setStatus(props.status)\r\n       },[props.status])\r\n       const activateEditMode = () => \r\n       {\r\n            setEditMode(true)\r\n       } \r\n       const deactivateEditMode = () => {\r\n        setEditMode(false)\r\n        props.updateStatusThunk(status)\r\n       } \r\n       const onStatusChange = (e) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n       return (\r\n        <section>\r\n            {!editMode?\r\n            <div>\r\n                <span  className={styles.status} onDoubleClick={activateEditMode}>{`${props.status}`}</span>\r\n            </div>\r\n            :\r\n            <div>\r\n                <input onBlur={deactivateEditMode} onKeyPress={(e)=>{if(e.key === 'Enter'){deactivateEditMode()}}} onChange={onStatusChange} autoFocus={true}/>\r\n            </div>}\r\n        </section>)}\r\n\r\nexport default Status","import React from 'react';\r\nimport style from './ConfirmNavigationModal.module.css';\r\n\r\nconst ConfirmNavigationModal = ({onConfirm,onCancel}) => {\r\n    return (<div className={style.confirmNavigationModalWrap}>\r\n        <div className={style.confirmNavigationModal}>\r\n        <div className={style.confirmNavigationModal__inner}>\r\n        <p className={style.confirmNavigationModal.message}>\"Вы уверены, что хотите покинуть страницу?\"</p>\r\n        <button onClick={onConfirm}>Да</button>\r\n        </div>\r\n        </div>\r\n         </div>)\r\n}\r\n\r\nexport default ConfirmNavigationModal;\r\n","import React,{useState,useEffect} from 'react';\r\nimport style from './ProfileInfo.module.css';\r\nimport {Contact} from './ProfileInfo'\r\nimport Status from './Status/StatusWithHooks'\r\nimport {CreateField, Input} from '../../common/ValidationForms/ValidationForms'\r\nimport {reduxForm} from 'redux-form'\r\nimport {withRouter} from 'react-router-dom'\r\nimport NavigationPrompt from \"react-router-navigation-prompt\"\r\nimport ConfirmNavigationModal from '../../common/ConfirmNavigationModal/ConfirmNavigationModal'\r\n\r\nconst ProfileInfoEditMode = (props) => {\r\n    const[isBlocking,setIsBlocking] = useState(true)\r\n    return <form onSubmit={props.handleSubmit}>\r\n        <NavigationPrompt when={isBlocking}>\r\n  {({ onConfirm, onCancel }) => (\r\n    <ConfirmNavigationModal\r\n      when={true}\r\n      onCancel={onCancel}\r\n      onConfirm={props.handleSubmit}\r\n    />\r\n  )}\r\n</NavigationPrompt> \r\n    {props.profile.photos.small==null?<img className={style.profileInfo__avatar} src=\"http://www.galerieserge.ru/pic/ava/noava.png\" alt=\"noAva\"/>:<img className={style.profileInfo__avatar} src={props.profile.photos.small} alt=\"avatar\"/>}\r\n    {props.autorizedUserProfile?<label className={style.profileInfo__uploadAvatar}>Загрузить фото<input onChange={props.onAvatarUploading} className={style.profileInfo__uploadAvatar} name=\"Изменить аватар\" type=\"file\" /></label>:null}\r\n    {props.autorizedUserProfile?<button type=\"submit\" className={style.profileInfo__editMode}>Сохранить изменения</button>:null}\r\n    {props.profile.userId!=props.autorizedUserId?<p>{props.status}</p>:<Status status = {props.status} updateStatusThunk={props.updateStatusThunk}/>}\r\n    <p><b>Имя:</b> {props.profile.fullName}</p> {CreateField([],\"Full name\",\"fullName\",Input,null,style.profileInfoEditMode__input)}\r\n    <p><b>Город:</b> LA, USA</p>\r\n    <p><b>Возраст: </b> 18 лет</p>\r\n    <p><b>Обо мне: </b>{props.profile.aboutMe}</p> {CreateField([],\"About me\",\"aboutMe\",Input,null,style.profileInfoEditMode__input)}\r\n    <span><b>Место работы: </b></span>{props.profile.lookingForAJob?<p>Ищу работу</p>:<span>Не ищу работу</span>}{CreateField([],\"Looking for a job\",\"lookingForAJob\",Input,{type: \"checkbox\"},style.profileInfoEditMode__checkbox)}\r\n    <p><b>Контакты: </b></p>\r\n    {Object.keys(props.profile.contacts).map((key,index)=>{return <div><Contact key={key} error={props.error} contactTitle={key} contactValue={props.profile.contacts[index]}/>{CreateField([],`${key}`,`Contacts.${key}`,Input,{},style.profileInfoEditMode__input)}</div>})}\r\n    </form>\r\n}           \r\n\r\nlet ProfileInfoEditModeReduxForm = reduxForm({form: \"ProfileInfoEditMode\"})(ProfileInfoEditMode)\r\n\r\nProfileInfoEditModeReduxForm = withRouter(ProfileInfoEditModeReduxForm)\r\n\r\nexport default ProfileInfoEditModeReduxForm","import React,{useState} from 'react';\r\nimport style from './ProfileInfo.module.css';\r\nimport Preloader from '../../common/Preloader/Preloader'\r\nimport Status from './Status/StatusWithHooks'\r\nimport ProfileInfoEditModeReduxForm from './ProfileInfoEditMode';\r\n\r\nconst ProfileInfo = (props) => {\r\n    const[editMode,setEditMode] = useState(false)\r\n    const onAvatarUploading = (e) => {\r\n        if(e.target.files.length) {props.uploadPhoto(e.target.files[0])}\r\n    }\r\n    const onSubmit = (formData) => {\r\n        console.log(formData)\r\n       props.saveProfileChanges(Object.defineProperty(formData, 'lookingForAJobDescription', {\r\n            value: \"no\",\r\n            writable: true,\r\n            enumerable: true,\r\n            configurable: true\r\n          }))\r\n            setEditMode(false)\r\n    }\r\n    if(!props.profile){return <Preloader />}\r\n    \r\n    return (\r\n        <section className={style.profileInfo}>\r\n            {editMode?<ProfileInfoEditModeReduxForm initialValues={props.profile} switchToViewMode={()=>{setEditMode(false)}} onSubmit={onSubmit} {...props} />:<ProfileInfoViewMode {...props} switchToEditMode={()=>{setEditMode(true)}} onAvatarUploading={onAvatarUploading}/>}  \r\n        </section>\r\n    )\r\n}\r\nexport const Contact = (props) => {\r\n            return(<div>\r\n                <em>{`${props.contactTitle}: `}</em>\r\n                <span>{props.contactValue}</span>\r\n                {props.error&&<span>{props.error}</span>}\r\n                </div>)\r\n}\r\nconst ProfileInfoViewMode = (props) => {\r\n    return (<>\r\n            <div className={style.profileInfo__avatarDiv}>\r\n            {props.profile.photos.small==null?<img className={style.profileInfo__avatar} src=\"http://www.galerieserge.ru/pic/ava/noava.png\" alt=\"noAva\"/>:<img className={style.profileInfo__avatar} src={props.profile.photos.small} alt=\"avatar\"/>}\r\n            {props.autorizedUserProfile?<label  className={style.profileInfo__uploadAvatar}>Загрузить фото<input onChange={props.onAvatarUploading} className={style.profileInfo__uploadAvatar} name=\"Изменить аватар\" type=\"file\" /></label>:null}\r\n            </div>\r\n            {props.autorizedUserProfile?<button type=\"submit\" onClick={props.switchToEditMode} className={style.profileInfo__editMode}>Редактировать профиль</button>:null}\r\n            {props.profile.userId!=props.autorizedUserId?<p>{props.status}</p>:<Status status = {props.status} updateStatusThunk={props.updateStatusThunk}/>}\r\n            <p><b>Имя:</b> {props.profile.fullName}</p>\r\n            <p><b>Город:</b> LA, USA</p>\r\n            <p><b>Возраст:</b> 18 лет</p>\r\n            <p><b>Обо мне: </b>{props.profile.aboutMe}</p>\r\n            <span><b>Место работы: </b></span>{props.profile.lookingForAJob?<span>Ищу работу</span>:<span>Не ищу работу</span>}\r\n            <p><b>Контакты: </b></p>\r\n            {Object.keys(props.profile.contacts).map((key,index)=>{return <Contact key={key} contactTitle={key} contactValue={props.profile.contacts[`${key}`]}/>})}\r\n            </>\r\n            )\r\n}\r\n            \r\n\r\nexport default ProfileInfo","import React from 'react';\r\nimport PostsContain from './Posts/PostsContain'\r\nimport ProfileInfo from './ProfileInfo/ProfileInfo'\r\nimport style from './Profile.module.css';\r\n\r\nconst Profile = (props) => {\r\n    /*\r\n    if we dont use PureComponent\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return nextProps!=this.props||nestState!=this.state\r\n    }*/\r\n    return (\r\n    <div>\r\n     {/*<div className={style.profile__hero}></div>*/}\r\n        <ProfileInfo userId={props.userId} \r\n        currentProfile={props.currentProfile} \r\n        status = {props.status} profile={props.profile} \r\n        updateStatusThunk={props.updateStatusThunk} \r\n        autorizedUserId={props.autorizedUserId} \r\n        autorizedUserProfile={props.autorizedUserProfile}\r\n        uploadPhoto={props.uploadPhoto}\r\n        saveProfileChanges={props.saveProfileChanges}\r\n        />\r\n        {props.userId==props.autorizedUserId||props.userId==undefined?<PostsContain/>:null}\r\n    </div>)}\r\n\r\nexport default Profile;","import React from 'react';\r\nimport {withRouter} from 'react-router-dom'\r\nimport Profile from './Profile'\r\nimport {setUserProfile} from '../../redux/profile-reducer'\r\nimport {connect} from 'react-redux'\r\nimport {setUserProfileThunk} from '../../redux/profile-reducer'\r\nimport withAuthRedirect from '../../hoc/withAuthRedirect'\r\nimport {compose} from 'redux'\r\nimport {getUserStatusThunk,updateStatusThunk,uploadPhoto,saveProfileChanges,getPosts} from '../../redux/profile-reducer'\r\n\r\nclass ProfileContain extends React.Component {\r\n    profileRender() {\r\n        let userId=this.props.match.params.userId\r\n            if (!userId) {\r\n                userId=this.props.autorizedUserId\r\n                if(!userId) {\r\n                    this.props.history.push('/login')\r\n                }\r\n            }\r\n            this.props.getPosts(userId)\r\n            this.props.setUserProfileThunk(userId)\r\n            this.props.getUserStatusThunk(userId)\r\n    }\r\n    componentDidMount() {\r\n        this.profileRender()\r\n            \r\n    }\r\n    componentDidUpdate(prevProps,prevState) {\r\n        if(this.props.match.params.userId!==prevProps.match.params.userId)\r\n        this.profileRender()\r\n    }\r\n    render() {\r\n        return <Profile \r\n        setUserProfileThunk={this.props.setUserProfileThunk} \r\n        userId={this.props.match.params.userId} \r\n        profile={this.props.profile} status={this.props.status} \r\n        updateStatusThunk={this.props.updateStatusThunk} \r\n        currentProfile={this.props.currentProfile} \r\n        autorizedUserId={this.props.autorizedUserId} \r\n        autorizedUserProfile={!this.props.match.params.userId}\r\n        uploadPhoto={this.props.uploadPhoto}\r\n        saveProfileChanges={this.props.saveProfileChanges}\r\n        />\r\n    }\r\n}\r\nlet mapStateToProps = (state) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    autorizedUserId: state.auth.id,\r\n    currentProfile: state.usersPage.currentProfile,\r\n    })\r\n\r\nexport default compose(connect(mapStateToProps,{setUserProfile,getUserStatusThunk,updateStatusThunk,setUserProfileThunk,uploadPhoto,saveProfileChanges,getPosts}),withRouter,withAuthRedirect)(ProfileContain);","import React from 'react'\r\nimport style from './Login.module.css'\r\nimport {reduxForm, Field, Form} from 'redux-form'\r\nimport {Input} from '../common/ValidationForms/ValidationForms'\r\nimport {required} from '../../utils/validation/validation'\r\nimport {connect} from 'react-redux'\r\nimport {login} from '../../redux/auth-reducer'\r\nimport {Redirect} from 'react-router-dom'\r\n\r\nconst LoginForm = (props) => {\r\n        return (\r\n            <Form className={style.loginForm} onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field validate={[required]} placeholder={'Логин'} name={\"email\"} component={Input}/> \r\n            </div>\r\n            <div>\r\n                <Field validate={[required]} placeholder={'Пароль'} name={\"password\"} type={\"password\"} component={Input}/> \r\n            </div>\r\n            <div>\r\n                <Field type={'checkbox'} name={'rememberMe'} component={'input'}/>Запомнить\r\n            </div>\r\n            <div>\r\n                <button type='submit'>Войти</button>\r\n            </div>\r\n            {props.captchaUrl!=null?<img src={props.captchaUrl}/>:null}\r\n            {props.captchaUrl&& <div>\r\n                <Field validate={[required]} type={'input'} name={'captcha'} component={'input'}/>Введите символы\r\n            </div>}\r\n            {props.error&&<span>{`${props.error}`}</span>}\r\n        </Form>\r\n        )\r\n    }\r\n// const LoginHForm = (props) => {\r\n//         return (\r\n//             <Form className={style.loginForm} onSubmit={props.handleSubmit}>\r\n//             <div>\r\n//                 <Field validate={[required]} placeholder={'Логин'} name={\"email\"} component={Input}/> \r\n//             </div>\r\n//             <div>\r\n//                 <Field validate={[required]} placeholder={'Пароль'} name={\"password\"} type={\"password\"} component={Input}/> \r\n//             </div>\r\n//             <div>\r\n//                 <Field  type={'checkbox'} name={'rememberMe'} component={'input'}/>Запомнить\r\n//             </div>\r\n//             <div>\r\n//                 <button type='submit'>Войти</button>\r\n//             </div>\r\n//             {props.captchaUrl!=null?<img src={props.captchaUrl}/>:null}\r\n//             {props.captchaUrl&& <div>\r\n//                 <Field validate={[required]} type={'input'} name={'captcha'} component={'input'}/>Введите символы\r\n//             </div>}\r\n//             {props.error&&<span>{`${props.error}`}</span>}\r\n//         </Form>\r\n//         )\r\n//     }\r\nconst LoginReduxForm = reduxForm({form: 'login'})(LoginForm)\r\n// const LoginHReduxForm = reduxForm({form: 'loginH'})(LoginHForm)\r\n\r\nclass LoginContain extends React.Component {\r\n    onSubmit = (formData) => {\r\n        this.props.login(formData.email,formData.password,formData.rememberMe,formData.captcha)\r\n    }\r\n    // onSubmitViaHAPI = (formData) => {\r\n    //     this.props.loginH(formData.email,formData.password)\r\n    // }\r\n    render(){\r\n        return(this.props.isAuth?\r\n            <Redirect to=\"/profile\" />\r\n            :\r\n        <section>\r\n            <h1 className={style.login__name}>Авторизация</h1>\r\n            <LoginReduxForm captchaUrl={this.props.captchaUrl} onSubmit={this.onSubmit}/>\r\n            {/* <LoginHReduxForm onSubmit={this.onSubmitViaHAPI}/> */}\r\n            <p className={style.notLogined}>Вы не залогинены</p>\r\n        </section>)\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n    isAuth: state.auth.isAuth,\r\n    captchaUrl: state.auth.captchaUrl,\r\n})\r\n\r\nexport default connect(mapStateToProps,{login})(LoginContain)","import React from 'react'\r\nimport style from './Commentary.module.css'\r\n\r\nconst Commentary = (props) => {\r\n    return (<section>\r\n\r\n           </section>)\r\n}\r\nexport default Commentary","import React from 'react'\r\nimport style from './LatestComments.module.css'\r\nimport Commentary from './Commentary/Commentary'\r\n\r\nconst LatestComments = (props) => {\r\n    return (<aside className={style.sidebar}>\r\n           <Commentary />\r\n           </aside>)\r\n}\r\nexport default LatestComments","import React from \"react\"\r\nimport style from \"./NewsCommentaries.module.css\"\r\nimport Preloader from '../../../common/Preloader/Preloader'\r\n\r\nconst NewsCommentaries = (props) => {\r\n \r\n  if(!props.newsData.commentaries){return <Preloader/ >}\r\n  let newsCommentariesList = props.newsData.commentaries.map((commentary,index)=>{\r\n  return <NewsCommentary key={index} newsId={props.newsData.newsId} deleteCommentaryForNews={props.deleteCommentaryForNews} commentary={commentary} userId={props.userId}/>})\r\n return <div>\r\n      <h4 className={style.commentariesName}>{`Комментарии: ${props.newsData.commentaries.length}`}</h4>\r\n      <div className={style.newsCommentariesList}>{newsCommentariesList}</div>\r\n   </div>\r\n  }\r\n\r\nconst NewsCommentary = (props) => {\r\n      return (<div className={style.newsCommentary}>\r\n          <p>{props.commentary.userName}</p>\r\n          <p className={style.newsCommentary__date}>{new Date(props.commentary.date).toLocaleString()}</p>\r\n          <p className={style.newsCommentary__text}>{props.commentary.commentaryText}</p>\r\n          {props.commentary.userId===props.userId?<button type=\"submit\" onClick={()=>props.deleteCommentaryForNews(props.newsId,props.commentary._id)}>Удалить</button>:null}\r\n          </div>)\r\n}\r\nexport default NewsCommentaries\r\n","import React from 'react';\r\nimport style from './CommentarySign.module.css';\r\nimport commentary from '../../../assets/images/commentary.png'\r\n\r\nconst CommentarySign = (props) => {\r\n    return (<div className={props.className} onClick={props.onClick}>\r\n    <img className={style.commentary} src={commentary} />\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default CommentarySign;\r\n","import React from \"react\"\r\nimport ReactDOM from 'react-dom'\r\nimport style from \"./News.module.css\"\r\nimport {reduxForm, Field, Form} from 'redux-form'\r\nimport {required,maxLengthCreator} from '../../../utils/validation/validation.js'\r\nimport {Textarea} from '../../../components/common/ValidationForms/ValidationForms'\r\nimport NewsCommentaries from './NewsCommentaries/NewsCommentaries'\r\nimport {useState} from 'react'\r\nimport CommentarySign from '../../common/CommentarySign/CommentarySign'\r\nimport LikeSign from '../../common/LikeSign/LikeSign'\r\n\r\nlet maxLengthCreatorValidate = maxLengthCreator(40)\r\n\r\nconst AddNewsCommentaryForm = (props) => {\r\n    return  <Form  onSubmit={props.handleSubmit} className={style.news__commentary}>\r\n                <Field   rows='8' validate={[required,maxLengthCreatorValidate]} name={`news${props.newsId}СommentaryText`} component={Textarea}/>\r\n                <button autoFocus className={style.button}>Комментировать</button>\r\n            </Form>\r\n}\r\n\r\nconst AddNewsCommentaryReduxForm = reduxForm({form: \"addNewsCommentaryReduxForm\"})(AddNewsCommentaryForm)\r\n\r\nconst News = (props) => {\r\n    let onAddCommentary = (values) => {\r\n        props.addCommentaryForNews(props.newsDataToNewsComponent.newsId,values[`news${props.newsDataToNewsComponent.newsId}СommentaryText`],props.userName,props.userId)\r\n        switchToCommentaryMode(false)\r\n    } \r\n    const[addCommentaryMode,switchToCommentaryMode] = useState(false)\r\n    const[likeInProgress,setLikeInProgress]=useState(false)\r\n    return (\r\n        <div className={style.news} key={props.newsDataToNewsComponent.newsId}>\r\n        <h3 className={style.news__name}>{props.newsDataToNewsComponent.newsName}</h3>\r\n        <p className={style.news__date}>{new Date(props.newsDataToNewsComponent.date).toLocaleString().substring(-10,10)}</p>\r\n        <img className={style.news__hero} src={props.newsDataToNewsComponent.newsImage||\"https://www.grekomania.ru/images/places/19/cyclades/santorini/big/88316_Famous-Santorini-sunset-3.jpg\"} alt=\"\"/>\r\n        <p>{props.newsDataToNewsComponent.newsText}</p>\r\n        <NewsCommentaries newsData={props.newsDataToNewsComponent} userId={props.userId} deleteCommentaryForNews={props.deleteCommentaryForNews}/>\r\n        <div className={style.news__likeAndCommentaryPanel}>\r\n        </div>\r\n        {addCommentaryMode?<AddNewsCommentaryReduxForm onBlur={()=>{\r\n        switchToCommentaryMode(false)\r\n        }} onSubmit={onAddCommentary} newsId={props.newsDataToNewsComponent.newsId}/>:\r\n        <section className={style.news__likeAndCommentaryPanel}>\r\n        <CommentarySign className={style.news__likeAndCommentaryPanel__commentarySign} \r\n                        onClick={()=>{switchToCommentaryMode(true)}}/>\r\n                       \r\n        {props.newsDataToNewsComponent.usersLikes.some(user=>user==props.userId)?\r\n        <LikeSign onClick={()=>{\r\n            props.deleteLike(props.newsDataToNewsComponent.newsId,props.userId)}} className={style.news__likeAndCommentaryPanel__likeSign + ' ' + style.isLiked}/>:\r\n        <LikeSign onClick={()=>{props.addLike(props.newsDataToNewsComponent.newsId,props.userId)}} className={style.news__likeAndCommentaryPanel__likeSign}/>}\r\n        <p className={style.likeAndCommentaryPanel__likeSign}>{props.newsDataToNewsComponent.likes}</p>\r\n        </section>\r\n        }\r\n        \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default News","import React from \"react\"\r\nimport style from \"./NewsList.module.css\"\r\nimport {useEffect} from 'react'\r\nimport News from \"./News/News\"\r\nimport {connect} from 'react-redux'\r\nimport {getNewsData,addCommentaryForNews,deleteCommentaryForNews,addLike,deleteLike} from '../../redux/news-reducer'\r\nimport Preloader from \"../common/Preloader/Preloader\"\r\n\r\nconst NewsList = ({newsList,userId,userName,getNewsData,addCommentaryForNews,deleteCommentaryForNews,addLike,deleteLike}) => {\r\n    useEffect(()=>{\r\n        getNewsData()\r\n    },[])\r\n     if(!newsList){return <Preloader />}\r\n     let newsListToRender = newsList.map(newsData=><News userId={userId} userName={userName} addCommentaryForNews={addCommentaryForNews} deleteCommentaryForNews={deleteCommentaryForNews} addLike={addLike} deleteLike={deleteLike} newsDataToNewsComponent={newsData} />)\r\n     return (\r\n        <section>\r\n            {newsListToRender}\r\n        </section>\r\n)}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        newsList: state.newsPage.newsData,\r\n        userId: state.auth.id,\r\n        userName: state.auth.login\r\n    }\r\n    \r\n}\r\nconst NewsListContain = connect(mapStateToProps,{addCommentaryForNews,getNewsData,addLike,deleteLike,deleteCommentaryForNews})(NewsList)\r\n\r\nexport default NewsListContain","import React from 'react';\r\nimport './App.css';\r\nimport HeaderAPIComponent from \"./components/Header/HeaderContain\"\r\nimport NavigationContain from './components/Navigation/NavigationContain';\r\n//import DialogsContain from './components/Dialogs/DialogsContain';\r\nimport UsersContain from './components/Users/UsersContain'\r\nimport {Route, Switch, withRouter,Redirect} from 'react-router-dom'\r\nimport ProfileContain from './components/Profile/ProfileContain';\r\nimport LoginContain from './components/Login/LoginContain'\r\nimport {connect} from 'react-redux'\r\nimport {compose} from 'redux'\r\nimport LatestComments from \"./components/Sidebar/LatestComments\"\r\nimport Preloader from './components/common/Preloader/Preloader'\r\nimport {initializedApp} from './redux/app-reducer'\r\nimport NewsListContain from './components/News/NewsListContain'\r\nconst DialogsContain = React.lazy(() => import(\"./components/Dialogs/DialogsContain\"))\r\n\r\nclass App extends React.Component{\r\n    catchAllUnhandledErrors = (reason,promise) => {\r\n      console.log('error')\r\n      console.error()\r\n    }\r\n    componentDidMount() {\r\n      this.props.initializedApp()\r\n      window.addEventListener(\"unhandledrejection\",\r\n      this.catchAllUnhandledErrors)\r\n  }\r\n  componentWillUnmount() {\r\n      window.removeEventListener(\"unhandledrejection\",this.catchAllUnhandledErrors)\r\n  }\r\n  render(){\r\n  if (!this.props.initialized) {\r\n  \r\n    return <Preloader />\r\n  }\r\n  else {\r\n  return (\r\n    <div className=\"app-wrapper\">\r\n      <HeaderAPIComponent />\r\n      <NavigationContain />\r\n      <LatestComments />\r\n        <div className='content'>\r\n          <Switch>\r\n        <Route exact path='/' render={()=><Redirect to=\"/profile\"/>} />\r\n        <Route path='/news' render={ ()=> <NewsListContain /> } /> \r\n        <Route path='/profile/:userId?' render={ ()=> <ProfileContain /> } />\r\n        <Route path='/dialogs' render={ ()=> {return (<React.Suspense fallback={<div>Loading...</div>}>\r\n          <DialogsContain />\r\n        </React.Suspense>)\r\n        }} />\r\n        <Route path='/users' render={ ()=> <UsersContain /> } />\r\n        <Route path='/login' render={ ()=> <LoginContain/> } />\r\n        <Route path='/*' render={ ()=> <div>404 NOT FOUND</div> } />\r\n        </Switch>\r\n      </div>\r\n      </div>\r\n    )\r\n}}}\r\n\r\nlet mapStateToProps = (state) => {\r\n  return ({\r\n    initialized: state.app.initialized\r\n  })\r\n}\r\n\r\nexport default compose(connect(mapStateToProps, {initializedApp}),withRouter)(App);","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import store from './redux/redux-store';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport {Provider} from 'react-redux'\r\n\r\n    ReactDOM.render(\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n    <Provider store={store}>\r\n    <App/>\r\n    </Provider>\r\n    </BrowserRouter>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"ValidationForms_input__33chs\",\"input_zeroValueError\":\"ValidationForms_input_zeroValueError__1SqR4\",\"textarea_maxLengthError\":\"ValidationForms_textarea_maxLengthError__35yqu\"};","export const required = value => (value ? undefined : 'Required')\r\n\r\nexport const maxLengthCreator = maxLength => value => {\r\n    if (value&&value.length > maxLength) return \"Max length error\"\r\n    return undefined\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__1TyfI\",\"navigation\":\"Navigation_navigation__1O0V2\",\"active\":\"Navigation_active__2eLiK\",\"bestfriends\":\"Navigation_bestfriends__1JO9G\",\"bestfriends_persons\":\"Navigation_bestfriends_persons__KWk85\",\"bestfriend\":\"Navigation_bestfriend__1lqpx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"User_user__1FlO7\",\"user__image\":\"User_user__image__vVajB\",\"user__image__avatar\":\"User_user__image__avatar__kP5PM\",\"user__body\":\"User_user__body__2hWVW\",\"user__status\":\"User_user__status__1WFov\",\"button\":\"User_button__2jNKh\",\"button_follow\":\"User_button_follow__1C_9j\",\"button_unfollow\":\"User_button_unfollow__1FZ7B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Post_button__3L8G_\",\"like\":\"Post_like__1H8vx\",\"post_wrapper\":\"Post_post_wrapper__2TVcd\",\"post__likeAndLikesCountPanel\":\"Post_post__likeAndLikesCountPanel__3eBBK\",\"post__likeSign\":\"Post_post__likeSign__1dQDL\",\"post__message\":\"Post_post__message__3_3Vy\",\"likeAndCommentaryPanel__likeSign\":\"Post_likeAndCommentaryPanel__likeSign__3_v0V\",\"isLiked\":\"Post_isLiked__j__CR\",\"post__like\":\"Post_post__like__2zMeZ\",\"post__likesCount\":\"Post_post__likesCount__2udt9\",\"button_delete\":\"Post_button_delete__1PPDf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__37u3Q\",\"header__logined\":\"Header_header__logined__3iMn_\",\"header__welcome\":\"Header_header__welcome__2iO3-\",\"button_logout\":\"Header_button_logout__3hl2L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"newsCommentary__date\":\"NewsCommentaries_newsCommentary__date__3KDRS\",\"newsCommentary__text\":\"NewsCommentaries_newsCommentary__text__3ITn_\",\"newsCommentariesList\":\"NewsCommentaries_newsCommentariesList__2ybW6\",\"newsCommentary\":\"NewsCommentaries_newsCommentary__3_PyY\",\"commentariesName\":\"NewsCommentaries_commentariesName__3lVvu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"activePage\":\"Pagination_activePage__3acUF\",\"button_showMore\":\"Pagination_button_showMore__3JlVR\",\"pagination\":\"Pagination_pagination__39esa\",\"button\":\"Pagination_button__2c18F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"confirmNavigationModalWrap\":\"ConfirmNavigationModal_confirmNavigationModalWrap__2Fue7\",\"confirmNavigationModal\":\"ConfirmNavigationModal_confirmNavigationModal__K3QAq\",\"confirmNavigationModal__inner\":\"ConfirmNavigationModal_confirmNavigationModal__inner__23Bg5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginForm\":\"Login_loginForm__1mUA1\",\"notLogined\":\"Login_notLogined__27YrQ\",\"login__name\":\"Login_login__name__X9GwK\"};","import React from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nlet mapStateToPropsForRedirect = (state) => (\r\n    {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n)\r\n\r\nconst withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render(){ \r\n        if (!this.props.isAuth) return <Redirect to = {'/login'} />\r\n        return <Component {...this.props} />\r\n    }}\r\n    let ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent)\r\n    return ConnectedAuthRedirectComponent\r\n}\r\n\r\nexport default withAuthRedirect","// extracted by mini-css-extract-plugin\nmodule.exports = {\"newPostTextarea\":\"Posts_newPostTextarea__15dBb\",\"send\":\"Posts_send__3L7TI\"};"],"sourceRoot":""}